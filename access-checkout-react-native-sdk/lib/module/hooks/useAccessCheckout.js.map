{"version":3,"names":["AccessCheckout","CardConfig","useCardValidation","useCvcOnlyValidation","useAccessCheckout","baseUrl","checkoutId","config","accessCheckout","merchantId","_config$validationCon","_config$validationCon2","_config$validationCon3","initialiseCardValidation","cardValidationConfig","panId","expiryDateId","cvcId","enablePanFormatting","validationConfig","acceptedCardBrands","merchantListener","validationListener","generateSessions","sessionTypes","initialiseValidation","_config$validationCon4","initialiseCvcOnlyValidation","cvcOnlyValidationConfig","generateCvcOnlySession"],"sources":["useAccessCheckout.ts"],"sourcesContent":["import {\n  AccessCheckout,\n  CardConfig,\n  type CardValidationEventListener,\n  CvcOnlyConfig,\n  CvcOnlyValidationEventListener,\n  Sessions,\n} from '../index';\nimport { useCardValidation } from './useCardValidation';\nimport { useCvcOnlyValidation } from './useCvcOnlyValidation';\n\nexport interface UseAccessCheckoutExports {\n  initialiseValidation: () => Promise<boolean>;\n  generateSessions: (sessionTypes: string[]) => Promise<Sessions>;\n}\n\nexport interface UseAccessCheckout {\n  baseUrl: string;\n  checkoutId: string;\n  config: CardConfig | CvcOnlyConfig;\n}\n\nexport const useAccessCheckout = ({\n  baseUrl,\n  checkoutId,\n  config,\n}: UseAccessCheckout): UseAccessCheckoutExports => {\n  const accessCheckout = new AccessCheckout({\n    baseUrl: baseUrl,\n    merchantId: checkoutId,\n  });\n\n  /**\n   * Implementation note: Decided to use classes to benefit from instance checking.\n   * If using interfaces or types a \"type guard\" could have been used. the trade off being having to check for\n   * a specific property that would be unique to that interface/type which in theory it introduces another point of\n   * failure if the property was to be renamed and not updated in the type guard.\n   */\n  if (config instanceof CardConfig) {\n    const { initialiseCardValidation } = useCardValidation({\n      accessCheckout,\n      cardValidationConfig: {\n        panId: config.panId,\n        expiryDateId: config.expiryDateId,\n        cvcId: config.cvcId,\n        enablePanFormatting: config.validationConfig?.enablePanFormatting,\n        acceptedCardBrands: config.validationConfig?.acceptedCardBrands,\n      },\n      merchantListener: config.validationConfig\n        ?.validationListener as CardValidationEventListener,\n    });\n\n    const generateSessions = (sessionTypes: string[]) =>\n      accessCheckout.generateSessions(\n        {\n          panId: config.panId,\n          expiryDateId: config.expiryDateId,\n          cvcId: config.cvcId,\n        },\n        sessionTypes\n      );\n\n    return {\n      initialiseValidation: initialiseCardValidation,\n      generateSessions,\n    };\n  } else {\n    const { initialiseCvcOnlyValidation } = useCvcOnlyValidation({\n      accessCheckout,\n      cvcOnlyValidationConfig: { cvcId: config.cvcId },\n      merchantListener: config.validationConfig\n        ?.validationListener as CvcOnlyValidationEventListener,\n    });\n\n    const generateCvcOnlySession = (sessionTypes: string[]) =>\n      accessCheckout.generateSessions(\n        {\n          cvcId: config.cvcId,\n        },\n        sessionTypes\n      );\n\n    return {\n      initialiseValidation: initialiseCvcOnlyValidation,\n      generateSessions: generateCvcOnlySession,\n    };\n  }\n};\n"],"mappings":"AAAA,SACEA,cAAc,EACdC,UAAU,QAKL,UAAU;AACjB,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,oBAAoB,QAAQ,wBAAwB;AAa7D,OAAO,MAAMC,iBAAiB,GAAGA,CAAC;EAChCC,OAAO;EACPC,UAAU;EACVC;AACiB,CAAC,KAA+B;EACjD,MAAMC,cAAc,GAAG,IAAIR,cAAc,CAAC;IACxCK,OAAO,EAAEA,OAAO;IAChBI,UAAU,EAAEH;EACd,CAAC,CAAC;;EAEF;AACF;AACA;AACA;AACA;AACA;EACE,IAAIC,MAAM,YAAYN,UAAU,EAAE;IAAA,IAAAS,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAChC,MAAM;MAAEC;IAAyB,CAAC,GAAGX,iBAAiB,CAAC;MACrDM,cAAc;MACdM,oBAAoB,EAAE;QACpBC,KAAK,EAAER,MAAM,CAACQ,KAAK;QACnBC,YAAY,EAAET,MAAM,CAACS,YAAY;QACjCC,KAAK,EAAEV,MAAM,CAACU,KAAK;QACnBC,mBAAmB,GAAAR,qBAAA,GAAEH,MAAM,CAACY,gBAAgB,cAAAT,qBAAA,uBAAvBA,qBAAA,CAAyBQ,mBAAmB;QACjEE,kBAAkB,GAAAT,sBAAA,GAAEJ,MAAM,CAACY,gBAAgB,cAAAR,sBAAA,uBAAvBA,sBAAA,CAAyBS;MAC/C,CAAC;MACDC,gBAAgB,GAAAT,sBAAA,GAAEL,MAAM,CAACY,gBAAgB,cAAAP,sBAAA,uBAAvBA,sBAAA,CACdU;IACN,CAAC,CAAC;IAEF,MAAMC,gBAAgB,GAAIC,YAAsB,IAC9ChB,cAAc,CAACe,gBAAgB,CAC7B;MACER,KAAK,EAAER,MAAM,CAACQ,KAAK;MACnBC,YAAY,EAAET,MAAM,CAACS,YAAY;MACjCC,KAAK,EAAEV,MAAM,CAACU;IAChB,CAAC,EACDO,YACF,CAAC;IAEH,OAAO;MACLC,oBAAoB,EAAEZ,wBAAwB;MAC9CU;IACF,CAAC;EACH,CAAC,MAAM;IAAA,IAAAG,sBAAA;IACL,MAAM;MAAEC;IAA4B,CAAC,GAAGxB,oBAAoB,CAAC;MAC3DK,cAAc;MACdoB,uBAAuB,EAAE;QAAEX,KAAK,EAAEV,MAAM,CAACU;MAAM,CAAC;MAChDI,gBAAgB,GAAAK,sBAAA,GAAEnB,MAAM,CAACY,gBAAgB,cAAAO,sBAAA,uBAAvBA,sBAAA,CACdJ;IACN,CAAC,CAAC;IAEF,MAAMO,sBAAsB,GAAIL,YAAsB,IACpDhB,cAAc,CAACe,gBAAgB,CAC7B;MACEN,KAAK,EAAEV,MAAM,CAACU;IAChB,CAAC,EACDO,YACF,CAAC;IAEH,OAAO;MACLC,oBAAoB,EAAEE,2BAA2B;MACjDJ,gBAAgB,EAAEM;IACpB,CAAC;EACH;AACF,CAAC"}