{"version":3,"names":["_react","require","_reactNative","_CvcOnlyValidationEventListener","_ValidationListenerException","_AccessCheckoutReactNative","_AccessCheckout","_interopRequireDefault","obj","__esModule","default","useCvcOnlyValidationEventListener","validationListener","useEffect","nativeEventListener","cvcOnlyValidationNativeEventListenerOf","nativeEventEmitter","NativeEventEmitter","AccessCheckoutReactNative","eventSubscription","addListener","AccessCheckout","CvcOnlyValidationEventType","remove","exports","useCvcOnlyValidation","accessCheckout","cvcOnlyValidationConfig","initialiseCvcOnlyValidation","ValidationListenerException"],"sources":["useCvcOnlyValidation.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport { NativeEventEmitter } from 'react-native';\nimport type { CvcOnlyValidationEventListener } from '../validation/CvcOnlyValidationEventListener';\nimport { cvcOnlyValidationNativeEventListenerOf } from '../validation/CvcOnlyValidationEventListener';\nimport { ValidationListenerException } from '../validation/ValidationListenerException';\nimport { AccessCheckoutReactNative } from '../AccessCheckoutReactNative';\nimport AccessCheckout from '../AccessCheckout';\nimport type { CardValidationEventListener } from '../validation/CardValidationEventListener';\n\nexport const useCvcOnlyValidationEventListener = (validationListener: CvcOnlyValidationEventListener) => {\n  useEffect(() => {\n    //Safe-guard in the case where no validation listener was configured we avoid registering the native listener\n    if (!validationListener) {\n      return;\n    }\n\n    const nativeEventListener = cvcOnlyValidationNativeEventListenerOf(validationListener);\n    const nativeEventEmitter = new NativeEventEmitter(AccessCheckoutReactNative);\n\n    const eventSubscription = nativeEventEmitter.addListener(\n      AccessCheckout.CvcOnlyValidationEventType,\n      nativeEventListener\n    );\n\n    return () => {\n      eventSubscription.remove();\n    };\n  }, []);\n};\n\ninterface UseCvcOnlyValidationHook {\n  accessCheckout: AccessCheckout;\n  cvcOnlyValidationConfig: {\n    cvcId: string;\n  };\n  validationListener: CardValidationEventListener;\n}\n\nexport const useCvcOnlyValidation = ({\n  accessCheckout,\n  cvcOnlyValidationConfig,\n  validationListener,\n}: UseCvcOnlyValidationHook) => {\n  /*\n  Implementation Note: To allow the hook to render and use hooks correctly:\n  `useCvcOnlyValidationEventListener` has a safe-guard inside its useEffect to check if a validationListener\n  was provided in order to register the native event.\n  */\n  useCvcOnlyValidationEventListener(validationListener);\n  const initialiseCvcOnlyValidation = () => {\n    /*\n    Implementation Note: Since we do not block the rendering of the hook to allow for `validationConfig` to be optional.\n    We added a safe-guard that will raise a ValidationListenerException which prevents the\n    `initialiseCvcOnlyValidation` method from being called when no validationConfig is provided.\n    This provides the developers with a clear readable error message and enhances their debugging experience.\n    */\n    if (!validationListener) {\n      throw new ValidationListenerException();\n    }\n\n    return accessCheckout.initialiseCvcOnlyValidation(cvcOnlyValidationConfig);\n  };\n\n  return { initialiseCvcOnlyValidation };\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,+BAAA,GAAAF,OAAA;AACA,IAAAG,4BAAA,GAAAH,OAAA;AACA,IAAAI,0BAAA,GAAAJ,OAAA;AACA,IAAAK,eAAA,GAAAC,sBAAA,CAAAN,OAAA;AAA+C,SAAAM,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAGxC,MAAMG,iCAAiC,GAAIC,kBAAkD,IAAK;EACvG,IAAAC,gBAAS,EAAC,MAAM;IACd;IACA,IAAI,CAACD,kBAAkB,EAAE;MACvB;IACF;IAEA,MAAME,mBAAmB,GAAG,IAAAC,sEAAsC,EAACH,kBAAkB,CAAC;IACtF,MAAMI,kBAAkB,GAAG,IAAIC,+BAAkB,CAACC,oDAAyB,CAAC;IAE5E,MAAMC,iBAAiB,GAAGH,kBAAkB,CAACI,WAAW,CACtDC,uBAAc,CAACC,0BAA0B,EACzCR,mBACF,CAAC;IAED,OAAO,MAAM;MACXK,iBAAiB,CAACI,MAAM,CAAC,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACC,OAAA,CAAAb,iCAAA,GAAAA,iCAAA;AAUK,MAAMc,oBAAoB,GAAGA,CAAC;EACnCC,cAAc;EACdC,uBAAuB;EACvBf;AACwB,CAAC,KAAK;EAC9B;AACF;AACA;AACA;AACA;EACED,iCAAiC,CAACC,kBAAkB,CAAC;EACrD,MAAMgB,2BAA2B,GAAGA,CAAA,KAAM;IACxC;AACJ;AACA;AACA;AACA;AACA;IACI,IAAI,CAAChB,kBAAkB,EAAE;MACvB,MAAM,IAAIiB,wDAA2B,CAAC,CAAC;IACzC;IAEA,OAAOH,cAAc,CAACE,2BAA2B,CAACD,uBAAuB,CAAC;EAC5E,CAAC;EAED,OAAO;IAAEC;EAA4B,CAAC;AACxC,CAAC;AAACJ,OAAA,CAAAC,oBAAA,GAAAA,oBAAA","ignoreList":[]}